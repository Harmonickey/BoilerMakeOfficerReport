<!DOCTYPE html><!--HTML5 doctype-->
<html>
<head>
	<title>Your New Application</title>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
    <script type="text/javascript" src="jquery-1.11.0.js"></script>
    <link rel="stylesheet" type="text/css" href="all.css">
	<style type="text/css">
		/* Prevent copy paste for all elements except text fields */
		*  { -webkit-user-select:none; -webkit-tap-highlight-color:rgba(255, 255, 255, 0); }
		input, textarea  { -webkit-user-select:text; }
		body { background-color:white; color:black }
        
        /* my code */
        #div1 {width:350px;height:70px;padding:10px;border:1px solid #aaaaaa; position:absolute;left:100px;top:150px;}
        /* my code */
        .draggable {
    width:100px;
    height:100px;
    border:1px solid black;
    background-color: white;
}
.handler {
    position:absolute;
    bottom:5px;
    right:5px;
    height: 10px;
    width: 10px;
    background-color: green;
}
	</style>
	<script src="intelxdk.js"></script><script type="text/javascript" charset="utf-8">AppMobi.isweb = true;AppMobi.app = 'ky16PvxwEKYZeajKEVOqEYFEWgayMbHWkjryj2smpBY';AppMobi.package = 'PRODUCTION';AppMobi.webRoot = window.location.href.match('[^/]*//.*[/]{1}')[0];AppMobi.internal = {};AppMobi.internal.analyticsServer = '';</script>
	<script type="text/javascript">
		/* This code is used to run as soon as Intel activates */
		var onDeviceReady=function(){
		//hide splash screen
		intel.xdk.device.hideSplashScreen();
		};
		document.addEventListener("intel.xdk.device.ready",onDeviceReady,true);
        
        /* my code 
        function rotate() {
            rect = document.getElementById('rect');
            ctx = rect.getContext('2d');
            //ctx.translate(125, 125);
            //ctx.rotate(Math.PI /6);
            ctx.rotate(20*Math.PI/180);
            ctx.fillStyle = "rgb(200, 0, 0)";
            ctx.fillRect(25, 25, 50, 50);
        }
        
        function allowDrop(ev)
        {
            ev.preventDefault();
        }
        
        function drag(ev)
        {
            ev.dataTransfer.setData("Text",ev.target.id);
        }
        
        function drop(ev)
        {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Text");
            ev.target.appendChild(document.getElementById(data));
        }
        */
        // drag and rotate code
        
        // Your original element
var ele = $('.draggable');

$('.draggable').draggable({
    helper: "clone"
});
$('.draggable').bind('dragstop', function (event, ui) {
    if ($(ui.helper).hasClass('rotator'))
        return true
    $(this).after($(ui.helper).clone().draggable());
    applyRotation();
});

// Create handle dynamically
$('<div class="rotator"></div>').appendTo(ele).addClass('handler').css({
    'position': 'absolute',
        'bottom': 5,
        'right': 5,
        'height': 10,
        'width': 10,
        'background-color': 'green'
});

ele.css('position', 'relative');

applyRotation();

function applyRotation() {
    $('.handler').draggable({
        opacity: 0.01,
        helper: 'clone',
        drag: function (event, ui) {
            var rotateCSS = 'rotate(' + ui.position.left + 'deg)';

            $(this).parent().css({
                '-moz-transform': rotateCSS,
                    '-webkit-transform': rotateCSS
            });
        }
    });
}
        
        // drag and rotate ends
        /* my code 
	
	$(document).ready(function() {
		var $crash_scene = $("#crash_scene");
		
		for (var i = 0; i < 10; i++)
		{
			for (var j = 0; j < 15; j++)
			{
				$crash_scene.append("<div class='grid'></div>");
			}
			
		}
	});
		*/
	</script>
    <link rel="stylesheet" href="css/themename/jquery-ui.custom.css" />
<script src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script src="js/jquery-ui.custom.min.js"></script>
</head>
<body>
    <!-- my code -->
<body id="app_body">
	<!--<div id="top_section">
 		<label id="lbl_tools" for="tools">Tools</label>    
        <label id="lbl_scene" for="crash scene">Crash Scene</label>
    </div>

	
	<div id="tools">
    
    </div>
	<div id="crash_scene">
    	
    </div>
    <div id="arrow"> </div>
	<!-- content goes here-->
    <div class="draggable">DRAG ME</div>
    <!--<canvas id="rect" width="217" height="120" onload="rotate()"  >
    </canvas>
    <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)" ></div>
    <br>
    <!--<img id="drag1" src="img_logo.gif" draggable="true" ondragstart="drag(event)" width="336" height="69">-->
</body>
</html>
